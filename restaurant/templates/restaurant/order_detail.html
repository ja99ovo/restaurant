<!DOCTYPE html>
<html lang="zh">
    <head>
        <meta charset="UTF-8">
        <title>添加订单</title>
        <style>
            .container {
                display: flex;
                justify-content: space-around;
                margin: 20px;
            }
    
            .section {
                flex: 1;
                padding: 10px;
                margin: 5px;
                border: 1px solid #ddd;
            }
    
            .section h1 {
                display: inline-block;
                margin: 5px;
            }
    
            .section button {
                margin: 5px;
            }
        </style>
    </head>

{% extends "base.html" %}
{% block content %}
    <body>
        <h1> id: {{ order.id }}  </h1>
        <h1> prix: {{ order.prix }}  </h1>
        <div class="container">
            <div class="section people">
                <h3>Nombre de personnes</h3>
                <div>
                    <h1 >Adultes</h1><h1 id="display_adults">0</h1>
                    <button type="button" onclick="increment('adults')">Adultes +1</button>
                    <button type="button" onclick="decrement('adults')">Adultes -1</button>
                </div>
                <div>
                    <h1 >Grands enfants</h1><h1 id="display_kids">0</h1>
                    <button type="button" onclick="increment('kids')">Grands enfants +1</button>
                    <button type="button" onclick="decrement('kids')">Grands enfants -1</button>
                </div>
                <div>
                    <h1 >Petits enfants</h1><h1 id="display_toddlers">0</h1>
                    <button type="button" onclick="increment('toddlers')">Petits enfants +1</button>
                    <button type="button" onclick="decrement('toddlers')">Petits enfants -1</button>
                </div>
            </div>
    
            <!-- COCKTAILS SA 酒水部分 -->
            <div class="section drinks">
                <h3>COCKTAILS SA</h3>
                <ul>
                    {% for boisson in boissons_sa %}
                        <li>
                            {{ boisson.name }}
                            数量：<span id="display_boisson_{{ boisson.id }}">{{ boisson.quantity }}</span>
                            <button type="button" onclick="increment('boisson_{{ boisson.id }}')">+</button>
                            <button type="button" onclick="decrement('boisson_{{ boisson.id }}')">-</button>
                        </li>   
                    {% endfor %}
                </ul>
            </div>
            
            <!-- COCKTAILS AA 酒水部分 -->
            <div class="section drinks">
                <h3>COCKTAILS AA</h3>
                <ul>
                    {% for boisson in boissons_aa %}
                        <li>
                            {{ boisson.name }}
                            <span id="display_boisson_{{ boisson.id }}">{{ boisson.quantity }}</span>
                            <button type="button" onclick="increment('boisson_{{ boisson.id }}')">+</button>
                            <button type="button" onclick="decrement('boisson_{{ boisson.id }}')">-</button>
                        </li>   
                    {% endfor %}
                </ul>
            </div>
        </div>
        
        <!-- 表单用于提交更改 -->
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">更新订单</button>
        </form>

        <script>
            // 页面加载时设置初始值
            window.onload = function() {
                document.getElementById("display_adults").textContent = {{ order.adults }};
                document.getElementById("display_kids").textContent = {{ order.kids }};
                document.getElementById("display_toddlers").textContent = {{ order.toddlers }};
                {% for boisson in boissons_sa %}
                    document.getElementById("display_boisson_{{ boisson.id }}").textContent = {{ boisson.quantity }};
                {% endfor %}
                {% for boisson in boissons_aa %}
                    document.getElementById("display_boisson_{{ boisson.id }}").textContent = {{ boisson.quantity }};
                {% endfor %}
            };
        
            function increment(id) {
                var display = document.getElementById("display_" + id);
                var value = parseInt(display.textContent);
                display.textContent = value + 1;
                // 如果有对应的输入框，则更新值
                var input = document.getElementById("id_" + id);
                if(input) input.value = value + 1;
            }
        
            function decrement(id) {
                var display = document.getElementById("display_" + id);
                var value = parseInt(display.textContent);
                if (value > 0) {
                    display.textContent = value - 1;
                    // 如果有对应的输入框，则更新值
                    var input = document.getElementById("id_" + id);
                    if(input) input.value = value - 1;
                }
            }
        </script>
        
    </body>

    {% endblock %}
</html>
